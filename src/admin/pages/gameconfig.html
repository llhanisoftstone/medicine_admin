<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="js/common/formValidator/css/index_1.0.5.css">
    <script type="text/javascript"  src="js/common/formValidator/webluker_1.0.8.js"></script>
    <script type="text/javascript"  src="js/common/formValidator/validator.js"></script>
    <script type="text/javascript" src="js/common/bignumber.js"></script>
    <link href="css/bootstrap-select.css" rel="stylesheet">
</head>

<body>
<div id="wrapper">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <ul class="breadcrumb fa fa-home" style="width: 50%;display: inline;">
                    <li>
                        <a>系统配置</a>
                    </li>
                    <li>关卡配置</li>
                </ul>
                <div style="float: right;">
                    <button type="button" id="backBtn" onclick="back()" class=" fa fa-share-square btn btn-default"> 返回</button>
                </div>
            </div>
            <div class="panel-body">
                <div class="row">
        <div class="col-lg-12">

            <div class="panel panel-default">
                    <div class="panel-body">
                        <!--<form id="addGoodsForm">-->
                        <div class="" id="user_form">
                            <form id="titleForm">
                                <div class="row">
                                    <div class="col-md-4 form-group">
                                        <label for="name">关卡名称：</label>
                                        <div class="pinput">
                                            <input placeholder="关卡名称" datatype="require" class="form-control" id="name" maxlength="20">
                                        </div>
                                    </div>
                                    <div class="col-md-4 form-group">
                                        <label for="title_pic">展示图片：</label>
                                        <div class="pinput">
                                            <div class="input-group" >
                                                <input placeholder="请上传图片(219*220)" readonly type="text" id="title_pic" class="form-control" style="cursor: pointer;" datatype="require">
                                                <span class="input-group-addon" style="cursor: pointer;overflow: hidden;">
                                                    <i class="glyphicon glyphicon-search">
                                                    <input type="file" name="picfile[]" placeholder="" value="pic file" refattr="title_pic" id="title_picfile"  multiple="multiple" style="margin-top:-20px;margin-left:-20px;-webkit-opacity: 0;opacity: 0;width: 30px;height: 20px;">
                                                    </i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 form-group">
                                        <label for="sale_price">价格：</label>
                                        <div class="pinput">
                                            <input placeholder="价格，没有填0" oninput="num_limit(this,{max:8,maxval:99999.99,dec:2})" datatype="require money mlen" class="form-control" maxlength="8" id="sale_price" >
                                        </div>
                                    </div>
                                </div>
                                <div class="row">

                                </div>

                        <input id="id" style="display: none;"/>
                            </form>
                        </div>
                        <!--</form>-->
                    </div>
                <div class="panel-body">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            关卡
                            <button class="fa fa-plus-circle btn btn-default" id="addoption" onclick="addgames()"> 新增关卡</button>
                        </div>
                        <div class="panel-body">
                            <form role="form" id="gamesAddForm" style="display:none;">
                                <div class="row">
                                    <div class="col-md-4 form-group">
                                        <label for="level">关卡数：</label>
                                        <div class="pinput">
                                            <input  id="level" readonly="readonly" disabled name="level" data-level="" class="form-control" type="text" style="cursor: not-allowed" />
                                        </div>
                                    </div>
                                    <div class="col-md-4 form-group">
                                        <label >本关答题数量：</label>
                                        <div class="pinput">
                                            <input placeholder="请输入答题数量" id="max_step" oninput="if(this.value.length>5){this.value=this.value.slice(0,5)}" name="max_step" class="form-control" type="tel">
                                        </div>
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-md-4 form-group">
                                        <label for="isTicket">有礼物/券：</label>
                                        <div class="pinput">
                                            <select id="isTicket" class="form-control" onchange="showTickets()">
                                                <option value="1">否</option>
                                                <option value="2">是</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4 form-group isTicketShow" style="display:none;">
                                        <label for="storename">店铺名称：</label>
                                        <div class="pinput">
                                            <select id="storename" class="form-control" onchange="getTickets()">

                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4 form-group isTicketShow" style="display:none;">
                                        <label for="ticketname">优惠券/产品：</label>
                                        <div class="pinput">
                                            <select id="ticketname" class="form-control" name="ticket_id">

                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group  pbtn-group ">
                                    <button id="levelsAddBtn"  class="fa fa-save btn btn-default" type="button" onclick="levelsAdd()"> 保存关卡</button>
                                    <button id="resetSaveBtn" type="button" class="fa fa-reply-all btn btn-default">重置</button>
                                </div>
                            </form>
                            <table class="table table-striped table-bordered table-hover" style="text-align: center">
                                <thead>
                                <tr>
                                    <th class="col-sm-2">关卡</th>
                                    <th class="col-sm-2">答题数量</th>
                                    <th class="col-sm-5">优惠券/礼物</th>
                                    <th class="col-sm-5">操作</th>
                                </tr>
                                </thead>
                                <tbody id="answer">

                                </tbody>
                            </table>
                            <div class="text-center">
                                <button datatype="require" type="button" class="btn fa fa-save btn-default" _status="0" onclick="saveData();" id="savebtn">保存</button>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
    </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="js/power/gameconfig.js"></script>
<script id="answer-template" type="text/x-handlebars-template">
    {{#datas}}
        {{#each level_json}}
        <tr>
            <td style="text-align:center;" >第 {{level}} 关</td>
            <td style="text-align:center;" >{{max_step}} 题</td>
            <td style="text-align:center;" >
                {{#if reward}}
                        {{#each reward}}
                            <span>{{name}}</span>
                        {{/each}}
                    {{else}}
                        <span>无</span>
                {{/if}}
            </td>
            <td style="text-align: center;">
                <span class="fa fa-pencil-square-o" title="编辑" onclick="onLevelUpdate('{{level}}','{{max_step}}','{{reward}}')"></span>
                {{#equal deleteStatus true}}
                <span class="fa fa-trash-o" title="删除" onclick="onLevelDelete('{{id}}','{{level}}')"></span>
                {{/equal}}
            </td>
        </tr>
        {{/each}}
    {{/datas}}
</script>

</body>

</html>

